<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SDEV255: JavaScript Fetch API</title>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./../assets/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./../assets/images/favicon-16x16.png"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400;0,700;1,400;1,700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
    <script src="./../assets/scripts/code_snippets.js" defer></script>
    <script src="./../assets/scripts/focus_content.js" defer></script>
    <script src="./../assets/scripts/table_of_contents.js" defer></script>

    <!-- Bootstrap / Sass -->
    <link rel="stylesheet" href="./../assets/css/styles.css" />
    <link rel="stylesheet" href="./../assets/css/bootstrap-icons.css" />
    <script src="./../assets/scripts/bootstrap.bundle.min.js" defer></script>
  </head>
  <body class="bg-light">
    <div class="content-wrapper">
      <ul>
        <li>
          <a href="#javascript-fetch-api">JavaScript Fetch API</a>
          <ul>
            <li>
              <a href="#advantages-over-full-page-reload"
                >Advantages Over Full Page Reload:</a
              >
            </li>
            <li><a href="#return-types">Return Types</a></li>
            <li>
              <a href="#typical-fetch-api-usage">Typical Fetch API Usage</a>
            </li>
          </ul>
        </li>
      </ul>
      <h1 id="javascript-fetch-api">JavaScript Fetch API</h1>
      <p>
        The <strong>Fetch API</strong> is way to make HTTP requests in
        JavaScript using promises.
      </p>
      <ul>
        <li>Send data to a server</li>
        <li>Retrieve data from a server</li>
      </ul>
      <h2 id="advantages-over-full-page-reload">
        Advantages Over Full Page Reload:
      </h2>
      <ul>
        <li>Lower network overhead due to smaller payload (data sent)</li>
        <li>Can be used to update part of the DOM</li>
        <li>
          User doesn&#39;t see page reload so it feels like an
          &quot;application&quot;
        </li>
        <li>
          If no UI changes are needed, response can be processed in the
          background (e.g. database update)
        </li>
      </ul>
      <h2 id="return-types">Return Types</h2>
      <p>
        The fetch promise will resolve with a
        <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response"
          >Response</a
        >
        object that represents an HTTP response. From there we must convert:
      </p>
      <ul>
        <li>
          <strong>text()</strong> - returns a promise that resolves with the
          response as text
        </li>
        <li>
          <strong>json()</strong> - returns a promise that resolves with the
          response as JSON
        </li>
        <li>
          <strong>blob()</strong> - returns a promise that resolves with the
          response as a Blob (binary data)
        </li>
      </ul>
      <h2 id="typical-fetch-api-usage">Typical Fetch API Usage</h2>
      <p>Simple static webscrape:</p>
      <pre
        class="shiki shiki-themes one-light one-dark-pro"
        style="
          background-color: #fafafa;
          --shiki-dark-bg: #282c34;
          color: #383a42;
          --shiki-dark: #abb2bf;
        "
        tabindex="0"
      ><code><span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">// Make a request to the url.</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">const</span><span style="color:#986801;--shiki-dark:#E5C07B"> url</span><span style="color:#0184BC;--shiki-dark:#56B6C2"> =</span><span style="color:#50A14F;--shiki-dark:#98C379"> "https://mpjovanovich.github.io/course_notes/SDEV255/"</span><span style="color:#383A42;--shiki-dark:#ABB2BF">;</span></span>
<span class="line"><span style="color:#4078F2;--shiki-dark:#61AFEF">fetch</span><span style="color:#383A42;--shiki-dark:#ABB2BF">(</span><span style="color:#383A42;--shiki-dark:#E06C75">url</span><span style="color:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">  .</span><span style="color:#4078F2;--shiki-dark:#61AFEF">then</span><span style="color:#383A42;--shiki-dark:#ABB2BF">((</span><span style="color:#383A42;font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">httpResponse</span><span style="color:#383A42;--shiki-dark:#ABB2BF">) </span><span style="color:#A626A4;--shiki-dark:#C678DD">=></span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // "httpResponse" will be a "Response" object.</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    // Convert it to text with the "text" function.</span></span>
<span class="line"><span style="color:#A626A4;--shiki-dark:#C678DD">    return</span><span style="color:#383A42;--shiki-dark:#E5C07B"> httpResponse</span><span style="color:#383A42;--shiki-dark:#ABB2BF">.</span><span style="color:#4078F2;--shiki-dark:#61AFEF">text</span><span style="color:#383A42;--shiki-dark:#ABB2BF">();</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">  })</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // The "text" function was async, so wait for it to finish.</span></span>
<span class="line"><span style="color:#A0A1A7;font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  // "pageText" is a string, so log it.</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">  .</span><span style="color:#4078F2;--shiki-dark:#61AFEF">then</span><span style="color:#383A42;--shiki-dark:#ABB2BF">((</span><span style="color:#383A42;font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic">pageText</span><span style="color:#383A42;--shiki-dark:#ABB2BF">) </span><span style="color:#A626A4;--shiki-dark:#C678DD">=></span><span style="color:#383A42;--shiki-dark:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#E5C07B">    console</span><span style="color:#383A42;--shiki-dark:#ABB2BF">.</span><span style="color:#4078F2;--shiki-dark:#61AFEF">log</span><span style="color:#383A42;--shiki-dark:#ABB2BF">(</span><span style="color:#383A42;--shiki-dark:#E06C75">pageText</span><span style="color:#383A42;--shiki-dark:#ABB2BF">);</span></span>
<span class="line"><span style="color:#383A42;--shiki-dark:#ABB2BF">  });</span></span></code></pre>
      <p>Fetch some JSON:</p>
      <p>... in our lab we will fetch JSON and update the page with it ...</p>
    </div>
  </body>
</html>
